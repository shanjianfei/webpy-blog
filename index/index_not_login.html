<!DOCTYPE html>
<html>
<head>
	<title>xxx论坛</title>
	<meta charset="utf-8">
	<script src="/static/js/jquery-3.3.1.min.js"></script>
	<script src="/static/bootstrap/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="/static/bootstrap/css/bootstrap.min.css">
	<style type="text/css">
		#footer {
			position: absolute;
			left: 20px;
			right: 20px;
			bottom: 10px;
			color: #969696;
			text-align: center;
		}
		#footer button {
			float: right;
			margin-top: 20px;
			margin-right: 15px;
		}
		#footer textarea {
			border: 1px solid #c6c6c6;
		}
	</style>
</head>
<body>
	<div class="login">
		<button class="btn btn-primary" style="float: right" onclick="login()">登录</button>
		<div style="clear:both"></div>
	</div>
	<header>欢迎来到xxx论坛</header>
	<section></section>
	<footer id="footer">
		<form>
			<textarea class="form-control" rows="3"></textarea>
			<button class="btn btn-primary" onclick="publish()">发表</button>
		</form>
	</footer>
</body>
<script type="text/javascript">
	function login() {
		window.location = '/static/html/login.html'
	}

	function publish() {
		event.preventDefault();
		var comment = $('#footer textarea').val();
		$.post('/comment', {'comment': comment}, function(result) {
			var res = eval('(' + result + ')');
			if('status' in res && res['status'] == 'success') {
				$('section').append('<span>' + comment + '</span');
			} else {
				alert('登陆后方可评论');
			}
		});
		
	}
</script>
</html>